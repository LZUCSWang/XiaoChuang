<!DOCTYPE html>
<!-- saved from url=(0031)http://kylebing.cn/diary/#/edit -->
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <style>
    /* 通用样式 */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f2f2f2;
    }

    /* 在手机上设置页面的样式 */
    @media screen and (max-width: 600px) {

      /* 可以根据需要调整页面的样式 */
      .container {
        width: 90%;
        margin: 20px auto;
      }

      .content {
        font-size: 16px;
      }
    }

    /* 在大屏幕上设置页面的样式 */
    @media screen and (min-width: 601px) {

      /* 可以根据需要调整页面的样式 */
      .container {
        width: 60%;
        margin: 20px auto;
      }

      .content {
        font-size: 18px;
      }
    }
  </style>
  <style type="text/css">
    .swal-icon--error {
      border-color: #f27474;
      -webkit-animation: animateErrorIcon 0.5s;
      animation: animateErrorIcon 0.5s;
    }

    .swal-icon--error__x-mark {
      position: relative;
      display: block;
      -webkit-animation: animateXMark 0.5s;
      animation: animateXMark 0.5s;
    }

    .swal-icon--error__line {
      position: absolute;
      height: 5px;
      width: 47px;
      background-color: #f27474;
      display: block;
      top: 37px;
      border-radius: 2px;
    }

    .swal-icon--error__line--left {
      -webkit-transform: rotate(45deg);
      transform: rotate(45deg);
      left: 17px;
    }

    .swal-icon--error__line--right {
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
      right: 16px;
    }

    @-webkit-keyframes animateErrorIcon {
      0% {
        -webkit-transform: rotateX(100deg);
        transform: rotateX(100deg);
        opacity: 0;
      }

      to {
        -webkit-transform: rotateX(0deg);
        transform: rotateX(0deg);
        opacity: 1;
      }
    }

    @keyframes animateErrorIcon {
      0% {
        -webkit-transform: rotateX(100deg);
        transform: rotateX(100deg);
        opacity: 0;
      }

      to {
        -webkit-transform: rotateX(0deg);
        transform: rotateX(0deg);
        opacity: 1;
      }
    }

    @-webkit-keyframes animateXMark {
      0% {
        -webkit-transform: scale(0.4);
        transform: scale(0.4);
        margin-top: 26px;
        opacity: 0;
      }

      50% {
        -webkit-transform: scale(0.4);
        transform: scale(0.4);
        margin-top: 26px;
        opacity: 0;
      }

      80% {
        -webkit-transform: scale(1.15);
        transform: scale(1.15);
        margin-top: -6px;
      }

      to {
        -webkit-transform: scale(1);
        transform: scale(1);
        margin-top: 0;
        opacity: 1;
      }
    }

    @keyframes animateXMark {
      0% {
        -webkit-transform: scale(0.4);
        transform: scale(0.4);
        margin-top: 26px;
        opacity: 0;
      }

      50% {
        -webkit-transform: scale(0.4);
        transform: scale(0.4);
        margin-top: 26px;
        opacity: 0;
      }

      80% {
        -webkit-transform: scale(1.15);
        transform: scale(1.15);
        margin-top: -6px;
      }

      to {
        -webkit-transform: scale(1);
        transform: scale(1);
        margin-top: 0;
        opacity: 1;
      }
    }

    .swal-icon--warning {
      border-color: #f8bb86;
      -webkit-animation: pulseWarning 0.75s infinite alternate;
      animation: pulseWarning 0.75s infinite alternate;
    }

    .swal-icon--warning__body {
      width: 5px;
      height: 47px;
      top: 10px;
      border-radius: 2px;
      margin-left: -2px;
    }

    .swal-icon--warning__body,
    .swal-icon--warning__dot {
      position: absolute;
      left: 50%;
      background-color: #f8bb86;
    }

    .swal-icon--warning__dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      margin-left: -4px;
      bottom: -11px;
    }

    @-webkit-keyframes pulseWarning {
      0% {
        border-color: #f8d486;
      }

      to {
        border-color: #f8bb86;
      }
    }

    @keyframes pulseWarning {
      0% {
        border-color: #f8d486;
      }

      to {
        border-color: #f8bb86;
      }
    }

    .swal-icon--success {
      border-color: #a5dc86;
    }

    .swal-icon--success:after,
    .swal-icon--success:before {
      content: "";
      border-radius: 50%;
      position: absolute;
      width: 60px;
      height: 120px;
      background: #fff;
      -webkit-transform: rotate(45deg);
      transform: rotate(45deg);
    }

    .swal-icon--success:before {
      border-radius: 120px 0 0 120px;
      top: -7px;
      left: -33px;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
      -webkit-transform-origin: 60px 60px;
      transform-origin: 60px 60px;
    }

    .swal-icon--success:after {
      border-radius: 0 120px 120px 0;
      top: -11px;
      left: 30px;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
      -webkit-transform-origin: 0 60px;
      transform-origin: 0 60px;
      -webkit-animation: rotatePlaceholder 4.25s ease-in;
      animation: rotatePlaceholder 4.25s ease-in;
    }

    .swal-icon--success__ring {
      width: 80px;
      height: 80px;
      border: 4px solid hsla(98, 55%, 69%, 0.2);
      border-radius: 50%;
      box-sizing: content-box;
      position: absolute;
      left: -4px;
      top: -4px;
      z-index: 2;
    }

    .swal-icon--success__hide-corners {
      width: 5px;
      height: 90px;
      background-color: #fff;
      padding: 1px;
      position: absolute;
      left: 28px;
      top: 8px;
      z-index: 1;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
    }

    .swal-icon--success__line {
      height: 5px;
      background-color: #a5dc86;
      display: block;
      border-radius: 2px;
      position: absolute;
      z-index: 2;
    }

    .swal-icon--success__line--tip {
      width: 25px;
      left: 14px;
      top: 46px;
      -webkit-transform: rotate(45deg);
      transform: rotate(45deg);
      -webkit-animation: animateSuccessTip 0.75s;
      animation: animateSuccessTip 0.75s;
    }

    .swal-icon--success__line--long {
      width: 47px;
      right: 8px;
      top: 38px;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
      -webkit-animation: animateSuccessLong 0.75s;
      animation: animateSuccessLong 0.75s;
    }

    @-webkit-keyframes rotatePlaceholder {
      0% {
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
      }

      5% {
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
      }

      12% {
        -webkit-transform: rotate(-405deg);
        transform: rotate(-405deg);
      }

      to {
        -webkit-transform: rotate(-405deg);
        transform: rotate(-405deg);
      }
    }

    @keyframes rotatePlaceholder {
      0% {
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
      }

      5% {
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
      }

      12% {
        -webkit-transform: rotate(-405deg);
        transform: rotate(-405deg);
      }

      to {
        -webkit-transform: rotate(-405deg);
        transform: rotate(-405deg);
      }
    }

    @-webkit-keyframes animateSuccessTip {
      0% {
        width: 0;
        left: 1px;
        top: 19px;
      }

      54% {
        width: 0;
        left: 1px;
        top: 19px;
      }

      70% {
        width: 50px;
        left: -8px;
        top: 37px;
      }

      84% {
        width: 17px;
        left: 21px;
        top: 48px;
      }

      to {
        width: 25px;
        left: 14px;
        top: 45px;
      }
    }

    @keyframes animateSuccessTip {
      0% {
        width: 0;
        left: 1px;
        top: 19px;
      }

      54% {
        width: 0;
        left: 1px;
        top: 19px;
      }

      70% {
        width: 50px;
        left: -8px;
        top: 37px;
      }

      84% {
        width: 17px;
        left: 21px;
        top: 48px;
      }

      to {
        width: 25px;
        left: 14px;
        top: 45px;
      }
    }

    @-webkit-keyframes animateSuccessLong {
      0% {
        width: 0;
        right: 46px;
        top: 54px;
      }

      65% {
        width: 0;
        right: 46px;
        top: 54px;
      }

      84% {
        width: 55px;
        right: 0;
        top: 35px;
      }

      to {
        width: 47px;
        right: 8px;
        top: 38px;
      }
    }

    @keyframes animateSuccessLong {
      0% {
        width: 0;
        right: 46px;
        top: 54px;
      }

      65% {
        width: 0;
        right: 46px;
        top: 54px;
      }

      84% {
        width: 55px;
        right: 0;
        top: 35px;
      }

      to {
        width: 47px;
        right: 8px;
        top: 38px;
      }
    }

    .swal-icon--info {
      border-color: #c9dae1;
    }

    .swal-icon--info:before {
      width: 5px;
      height: 29px;
      bottom: 17px;
      border-radius: 2px;
      margin-left: -2px;
    }

    .swal-icon--info:after,
    .swal-icon--info:before {
      content: "";
      position: absolute;
      left: 50%;
      background-color: #c9dae1;
    }

    .swal-icon--info:after {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      margin-left: -3px;
      top: 19px;
    }

    .swal-icon {
      width: 80px;
      height: 80px;
      border-width: 4px;
      border-style: solid;
      border-radius: 50%;
      padding: 0;
      position: relative;
      box-sizing: content-box;
      margin: 20px auto;
    }

    .swal-icon:first-child {
      margin-top: 32px;
    }

    .swal-icon--custom {
      width: auto;
      height: auto;
      max-width: 100%;
      border: none;
      border-radius: 0;
    }

    .swal-icon img {
      max-width: 100%;
      max-height: 100%;
    }

    .swal-title {
      color: rgba(0, 0, 0, 0.65);
      font-weight: 600;
      text-transform: none;
      position: relative;
      display: block;
      padding: 13px 16px;
      font-size: 27px;
      line-height: normal;
      text-align: center;
      margin-bottom: 0;
    }

    .swal-title:first-child {
      margin-top: 26px;
    }

    .swal-title:not(:first-child) {
      padding-bottom: 0;
    }

    .swal-title:not(:last-child) {
      margin-bottom: 13px;
    }

    .swal-text {
      font-size: 16px;
      position: relative;
      float: none;
      line-height: normal;
      vertical-align: top;
      text-align: left;
      display: inline-block;
      margin: 0;
      padding: 0 10px;
      font-weight: 400;
      color: rgba(0, 0, 0, 0.64);
      max-width: calc(100% - 20px);
      overflow-wrap: break-word;
      box-sizing: border-box;
    }

    .swal-text:first-child {
      margin-top: 45px;
    }

    .swal-text:last-child {
      margin-bottom: 45px;
    }

    .swal-footer {
      text-align: right;
      padding-top: 13px;
      margin-top: 13px;
      padding: 13px 16px;
      border-radius: inherit;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }

    .swal-button-container {
      margin: 5px;
      display: inline-block;
      position: relative;
    }

    .swal-button {
      background-color: #7cd1f9;
      color: #fff;
      border: none;
      box-shadow: none;
      border-radius: 5px;
      font-weight: 600;
      font-size: 14px;
      padding: 10px 24px;
      margin: 0;
      cursor: pointer;
    }

    .swal-button:not([disabled]):hover {
      background-color: #78cbf2;
    }

    .swal-button:active {
      background-color: #70bce0;
    }

    .swal-button:focus {
      outline: none;
      box-shadow: 0 0 0 1px #fff, 0 0 0 3px rgba(43, 114, 165, 0.29);
    }

    .swal-button[disabled] {
      opacity: 0.5;
      cursor: default;
    }

    .swal-button::-moz-focus-inner {
      border: 0;
    }

    .swal-button--cancel {
      color: #555;
      background-color: #efefef;
    }

    .swal-button--cancel:not([disabled]):hover {
      background-color: #e8e8e8;
    }

    .swal-button--cancel:active {
      background-color: #d7d7d7;
    }

    .swal-button--cancel:focus {
      box-shadow: 0 0 0 1px #fff, 0 0 0 3px rgba(116, 136, 150, 0.29);
    }

    .swal-button--danger {
      background-color: #e64942;
    }

    .swal-button--danger:not([disabled]):hover {
      background-color: #df4740;
    }

    .swal-button--danger:active {
      background-color: #cf423b;
    }

    .swal-button--danger:focus {
      box-shadow: 0 0 0 1px #fff, 0 0 0 3px rgba(165, 43, 43, 0.29);
    }

    .swal-content {
      padding: 0 20px;
      margin-top: 20px;
      font-size: medium;
    }

    .swal-content:last-child {
      margin-bottom: 20px;
    }

    .swal-content__input,
    .swal-content__textarea {
      -webkit-appearance: none;
      background-color: #fff;
      border: none;
      font-size: 14px;
      display: block;
      box-sizing: border-box;
      width: 100%;
      border: 1px solid rgba(0, 0, 0, 0.14);
      padding: 10px 13px;
      border-radius: 2px;
      transition: border-color 0.2s;
    }

    .swal-content__input:focus,
    .swal-content__textarea:focus {
      outline: none;
      border-color: #6db8ff;
    }

    .swal-content__textarea {
      resize: vertical;
    }

    .swal-button--loading {
      color: transparent;
    }

    .swal-button--loading~.swal-button__loader {
      opacity: 1;
    }

    .swal-button__loader {
      position: absolute;
      height: auto;
      width: 43px;
      z-index: 2;
      left: 50%;
      top: 50%;
      -webkit-transform: translateX(-50%) translateY(-50%);
      transform: translateX(-50%) translateY(-50%);
      text-align: center;
      pointer-events: none;
      opacity: 0;
    }

    .swal-button__loader div {
      display: inline-block;
      float: none;
      vertical-align: baseline;
      width: 9px;
      height: 9px;
      padding: 0;
      border: none;
      margin: 2px;
      opacity: 0.4;
      border-radius: 7px;
      background-color: hsla(0, 0%, 100%, 0.9);
      transition: background 0.2s;
      -webkit-animation: swal-loading-anim 1s infinite;
      animation: swal-loading-anim 1s infinite;
    }

    .swal-button__loader div:nth-child(3n + 2) {
      -webkit-animation-delay: 0.15s;
      animation-delay: 0.15s;
    }

    .swal-button__loader div:nth-child(3n + 3) {
      -webkit-animation-delay: 0.3s;
      animation-delay: 0.3s;
    }

    @-webkit-keyframes swal-loading-anim {
      0% {
        opacity: 0.4;
      }

      20% {
        opacity: 0.4;
      }

      50% {
        opacity: 1;
      }

      to {
        opacity: 0.4;
      }
    }

    @keyframes swal-loading-anim {
      0% {
        opacity: 0.4;
      }

      20% {
        opacity: 0.4;
      }

      50% {
        opacity: 1;
      }

      to {
        opacity: 0.4;
      }
    }

    .swal-overlay {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 0;
      overflow-y: auto;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 10000;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .swal-overlay:before {
      content: " ";
      display: inline-block;
      vertical-align: middle;
      height: 100%;
    }

    .swal-overlay--show-modal {
      opacity: 1;
      pointer-events: auto;
    }

    .swal-overlay--show-modal .swal-modal {
      opacity: 1;
      pointer-events: auto;
      box-sizing: border-box;
      -webkit-animation: showSweetAlert 0.3s;
      animation: showSweetAlert 0.3s;
      will-change: transform;
    }

    .swal-modal {
      width: 478px;
      opacity: 0;
      pointer-events: none;
      background-color: #fff;
      text-align: center;
      border-radius: 5px;
      position: static;
      margin: 20px auto;
      display: inline-block;
      vertical-align: middle;
      -webkit-transform: scale(1);
      transform: scale(1);
      -webkit-transform-origin: 50% 50%;
      transform-origin: 50% 50%;
      z-index: 10001;
      transition: opacity 0.2s, -webkit-transform 0.3s;
      transition: transform 0.3s, opacity 0.2s;
      transition: transform 0.3s, opacity 0.2s, -webkit-transform 0.3s;
    }

    @media (max-width: 500px) {
      .swal-modal {
        width: calc(100% - 20px);
      }
    }

    @-webkit-keyframes showSweetAlert {
      0% {
        -webkit-transform: scale(1);
        transform: scale(1);
      }

      1% {
        -webkit-transform: scale(0.5);
        transform: scale(0.5);
      }

      45% {
        -webkit-transform: scale(1.05);
        transform: scale(1.05);
      }

      80% {
        -webkit-transform: scale(0.95);
        transform: scale(0.95);
      }

      to {
        -webkit-transform: scale(1);
        transform: scale(1);
      }
    }

    @keyframes showSweetAlert {
      0% {
        -webkit-transform: scale(1);
        transform: scale(1);
      }

      1% {
        -webkit-transform: scale(0.5);
        transform: scale(0.5);
      }

      45% {
        -webkit-transform: scale(1.05);
        transform: scale(1.05);
      }

      80% {
        -webkit-transform: scale(0.95);
        transform: scale(0.95);
      }

      to {
        -webkit-transform: scale(1);
        transform: scale(1);
      }
    }
  </style>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <!-- 搜索 -->
  <meta name="description" content="日记,标题日记,headline diary,人生日志,life log,日记应用,日记app,web版日记,diary web,纯文本日记,免费日记" />
  <meta name="keywords" content="日记,标题日记,headline diary,人生日志,life log,日记应用,日记app,web版日记,diary web,纯文本日记,免费日记" />

  <!-- web app -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- theme color-->
  <meta name="theme-color" content="#373737" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)" />

  <!-- fav icon -->
  <link rel="shortcut icon" href="http://kylebing.cn/diary/favicon.png" type="image/png" />

  <!-- apple-touch-icon -->
  <!-- <link rel="apple-touch-icon" href="http://kylebing.cn/diary/appicon-apple.png" /> -->
  <!-- mask-icon 目前非必须 -->
  <link rel="mask-icon" href="http://kylebing.cn/diary/appicon-apple.png" />

  <title>日记</title>
  <link rel="stylesheet" href="/static/日记_files/preloading.css" />
  <!-- <script src="/static/日记_files/hm.js"></script> -->
  {% comment %} <script type="module" crossorigin="" src="/static/日记_files/index-6604b009.js"></script> {% endcomment %}
  <link rel="stylesheet" href="/static/日记_files/index-61f04f75.css" />
  <!-- <link rel="manifest" href="http://kylebing.cn/diary/manifest.webmanifest" /> -->
  <!-- <script id="vite-plugin-pwa:register-sw" src="/static/日记_files/registerSW.js"></script> -->
  <style type="text/css">
    #_copy {
      align-items: center;
      background: #4494d5;
      border-radius: 3px;
      color: #fff;
      cursor: pointer;
      display: flex;
      font-size: 13px;
      height: 30px;
      justify-content: center;
      position: absolute;
      width: 60px;
      z-index: 1000;
    }

    #select-tooltip,
    #sfModal,
    .modal-backdrop,
    div[id^="reader-helper"] {
      display: none !important;
    }

    .modal-open {
      overflow: auto !important;
    }

    ._sf_adjust_body {
      padding-right: 0 !important;
    }

    .enable_copy_btns_div {
      position: fixed;
      width: 154px;
      left: 10px;
      top: 45%;
      background: #e7f1ff;
      border: 2px solid #4595d5;
      font-weight: 600;
      border-radius: 2px;
      font-family: -apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC,
        Hiragino Sans GB, Microsoft YaHei, Helvetica Neue, Helvetica, Arial,
        sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      z-index: 5000;
    }

    .enable_copy_btns_logo {
      width: 100%;
      background: #4595d5;
      text-align: center;
      font-size: 12px;
      color: #e7f1ff;
      line-height: 30px;
      height: 30px;
    }

    .enable_copy_btns_btn {
      display: block;
      width: 128px;
      height: 28px;
      background: #7f5711;
      border-radius: 4px;
      color: #fff;
      font-size: 12px;
      border: 0;
      outline: 0;
      margin: 8px auto;
      font-weight: 700;
      cursor: pointer;
      opacity: 0.9;
    }

    .enable_copy_btns_btn:hover {
      opacity: 0.8;
    }

    .enable_copy_btns_btn:active {
      opacity: 1;
    }
  </style>
</head>

<body inmaintabuse="1">
  <!--加载动画-->
  <div class="preloading" style="height: 750px; display: none">
    <div class="logo-preloading">
      <img src="/static/日记_files/logo.svg" alt="LOGO" />
    </div>
    <div class="preloading-title">载入中</div>
    <div class="preloading-loading">
      <div class="preloading-loading-1 preloading-loading-item"></div>
      <div class="preloading-loading-2 preloading-loading-item"></div>
      <div class="preloading-loading-3 preloading-loading-item"></div>
    </div>
  </div>

  <noscript>
    <strong>请开启JavaScript支持：未开启 JavaScript
      支持的情况下，《标题日记》将无法正常工作</strong>
  </noscript>
  <div id="app" data-v-app="">
    <div data-v-8ef8e387="">
      <div data-v-5b2413a4="" data-v-8ef8e387="" class="navbar-container">
        <nav data-v-5b2413a4="" class="navbar" id="navbar">
          <div data-v-5b2413a4="" class="nav-part-left">
            <!----><!---->
            <div data-v-5b2413a4="">
              <script>
                function m_delete() {
                    // 获取输入字段的值
                    var title = $(".title").val(); // 假设标题输入框有类名.title
                    var content = $(".content").val(); // 假设内容输入框有类名.content
            
                    // 假设每个天气图标是一个按钮或图像，并且当前激活的天气图标有一个.active类
                    var activeWeatherName = document.querySelector(".weather img[src*='_active']").getAttribute("title");
                    var activeCategoryName = $(".category[data-active='true']")
                      .text()
                      .trim(); // 获取激活的类别名称
            
                    // 构建要发送的数据
                    var data = {
                      delete: "yes",
                      title: title,
                      content: content,
                      weather: activeWeatherName,
                      category: activeCategoryName,
                      csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val(), // 获取CSRF令牌值
                    };
                    console.log(data);
                    // 发送 AJAX POST 请求
                    $.ajax({
                      type: "POST",
                      url: "/show_diary/", // 替换为您的 Django 视图 URL
                      data: data,
                      success: function (response) {
                        // 处理成功响应
                        console.log("Success:", response);
                        // 根据需要更新页面或重定向
                        // window.location.href = '/some_new_url'; // 例如，重定向
                        window.location.href = '../login';
                      },
                      error: function (xhr, status, error) {
                        // 处理错误
                        console.error("Error:", error);
                      },
                    });
                  }
              </script>
                <div data-v-9e062e58="" data-v-5b2413a4="" class="icon-btn" onclick="m_delete()">
                  <img
                    data-v-9e062e58=""
                    alt="删除"
                    title="删除"
                    src="/static/日记_files/Trash.svg"
                  />
                </div>
              </div> 
            <!----><!----><!----><!----><!----><!----><!----><!----><!---->
          </div>
          <div data-v-5b2413a4="" class="nav-part-right">
            <!----><!---->
            <div data-v-5b2413a4="" class="nav-btn-wrapper">
              <!---->
              <div data-v-5b2413a4="">
                <script>
                  function m_save() {
                      // 获取输入字段的值
                      var title = $(".title").val(); // 假设标题输入框有类名.title
                      var content = $(".content").val(); // 假设内容输入框有类名.content
              
                      // 假设每个天气图标是一个按钮或图像，并且当前激活的天气图标有一个.active类
                      var activeWeatherName = document.querySelector(".weather img[src*='_active']").getAttribute("title");
                      var activeCategoryName = $(".category[data-active='true']")
                        .text()
                        .trim(); // 获取激活的类别名称
              
                      // 构建要发送的数据
                      var data = {
                        delete: "no",
                        title: title,
                        content: content,
                        weather: activeWeatherName,
                        category: activeCategoryName,
                        csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val(), // 获取CSRF令牌值
                      };
                      console.log(data);
                      // 发送 AJAX POST 请求
                      $.ajax({
                        type: "POST",
                        url: "/show_diary/", // 替换为您的 Django 视图 URL
                        data: data,
                        success: function (response) {
                          // 处理成功响应
                          console.log("Success:", response);
                          // 根据需要更新页面或重定向
                          // window.location.href = '/some_new_url'; // 例如，重定向
                          window.location.href = '../login';
                        },
                        error: function (xhr, status, error) {
                          // 处理错误
                          console.error("Error:", error);
                        },
                      });
                    }
                </script>
                <div data-v-9e062e58="" data-v-5b2413a4="" class="icon-btn" id="confirmButton" onclick="m_save()">
                  <img data-v-9e062e58="" alt="确定" title="确定" src="/static/日记_files/done-0a7a3d90.svg"  />
                </div>
              </div>
            </div>
          </div>
          <div data-v-5b2413a4="" class="brand" onclick="m_save()">
            <img data-v-5b2413a4="" src="/static/日记_files/logo_title_saved-03ea30ed.svg" alt="LOGO" />
          </div>
          <!---->
        </nav>
        <div data-v-5b2413a4="" id="toast" class="fadeIn animated-fast" style="display: none">
          <div data-v-5b2413a4="" class="toast">
            <div data-v-5b2413a4="" class="toast-header">确定删除吗</div>
            <div data-v-5b2413a4="" class="toast-body"></div>
            <div data-v-5b2413a4="" class="toast-footer">
              <div data-v-5b2413a4="" class="btn-cancel">取消</div>
              <div data-v-5b2413a4="" class="btn-confirm">确定</div>
            </div>
          </div>
          <div data-v-5b2413a4="" class="mask"></div>
        </div>
      </div>
      <div data-v-8ef8e387="" class="diary" style="height: 705px">
        <div data-v-8ef8e387="" class="diary-list-container diary-list-container-mobile" style="height: 705px">
          <!-- <div data-v-8ef8e387="" class="diary-edit-container" style="min-height: 1000px"> -->
          <div data-v-8ef8e387="" class="diary-edit-container" style="height: 100%">
            <div class="diary-edit-content">
              <div class="editor-title">
                <label class="hidden"></label><textarea class="title" placeholder="一句话，概括你的一天" style="height: 150px"
                  id="divTop">
{{diary.title}}</textarea>
              </div>
              <div class="editor-content">
                <!----><label class="hidden"></label><textarea placeholder="日记详细内容，如果你有很多要写的" class="content" style=""
                  id="divBottom">
{{diary.content}}</textarea><!---->
              </div>
            </div>
            <div class="diary-edit-meta">
              <div data-v-ae445074="" class="weather-selector">
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/sunny.svg" alt="晴" title="晴" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/cloudy.svg" alt="多云" title="多云" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/overcast.svg" alt="阴" title="阴" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/sprinkle.svg" alt="小雨" title="小雨" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/rain.svg" alt="雨" title="雨" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/thunderstorm.svg" alt="暴雨" title="暴雨" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/snow.svg" alt="雪" title="雪" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/fog.svg" alt="雾" title="雾" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/tornado.svg" alt="龙卷风" title="龙卷风" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/smog.svg" alt="雾霾" title="雾霾" />
                </div>
                <div data-v-ae445074="" class="weather">
                  <img data-v-ae445074="" src="/static/日记_files/sandstorm.svg" alt="沙尘暴" title="沙尘暴" />
                </div>
              </div>
              <div data-v-6d93605c="" class="edit-category-selector">
                <div data-v-6d93605c="" class="category-wrapper" id="clickDiv">
                  <div data-v-6d93605c="" class="category" style="color: rgb(255, 149, 0)" background="默认">
                    默认
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper" id="clickDiv">
                  <div data-v-6d93605c="" class="category" style="color: rgb(186, 186, 186)" background="奶茶">
                    奶茶
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(139, 195, 74)" background="猫猫">
                    猫猫
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(255, 59, 48)" background="龙龙">
                    龙龙
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(36, 197, 255)" background="吃饭">
                    吃饭
                  </div>
                  {% comment %}
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(0, 122, 255)">
                    工作
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(90, 200, 250)">
                    游戏
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(255, 45, 112)">
                    电影
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(204, 115, 225)">
                    文章
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(76, 217, 100)">
                    学习
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(0, 170, 255)">
                    剧本
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(0, 201, 117)">
                    情感
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(255, 204, 0)">
                    运动
                  </div>
                </div>
                <div data-v-6d93605c="" class="category-wrapper">
                  <div data-v-6d93605c="" class="category" style="color: rgb(88, 86, 214)">
                    周报
                  </div>
                </div>
                {% endcomment %}
              </div>
              <!---->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!---->
  </div>

  {% comment %} <script>
    document.querySelector(".preloading").style.height = `${innerHeight}px`;
  </script> {% endcomment %}

  <deepl-input-controller><template shadowrootmode="open">
      <link rel="stylesheet" href="chrome-extension://fancfknaplihpclbhbpclnmmjcjanbaf/build/content.css" />
      <div>
        <div class="dl-input-translation-container svelte-ju4595">
          <div></div>
        </div>
      </div>
    </template></deepl-input-controller>
  <script>
    // 获取所有的类别元素
    const categories = document.querySelectorAll(".category");

    // 为每个类别元素添加点击事件监听器
    categories.forEach(function (category) {
      // 保存原始颜色
      const originalColor = category.style.color;

      category.addEventListener("click", function () {
        // 修改 targetDiv 的背景图。这里使用了一个示例图像URL，请替换为实际的图像URL。
        let bg = this.getAttribute("background");
        let url = "/static/" + bg + ".jpg";
        //document.getElementById("targetDiv").style.backgroundImage =
        "url('" + url + "')";
        document.getElementById("divTop").style.backgroundImage =
          "url('" + url + "')";
        document.getElementById("divTop").style.backgroundPosition =
          "center top";

        // 设置 divBottom 显示图片的下部分
        document.getElementById("divBottom").style.backgroundImage =
          "url('" + url + "')";
        // 这里我们需要动态计算 backgroundPosition 的值以显示图片的下部分
        // 因为图片已经被设置为 cover，所以我们只需简单地调整背景位置使其向上偏移
        document.getElementById("divBottom").style.backgroundPosition =
          "center -50%";
        // 首先，重置所有类别的样式
        categories.forEach(function (cat) {
          // 如果元素有data-original-color属性，说明它之前被点击过，现在需要恢复
          if (cat.hasAttribute("data-original-color")) {
            // 恢复原始文本颜色
            cat.style.color = cat.getAttribute("data-original-color");
            // 清除背景颜色
            cat.style.backgroundColor = "";
            // 移除标记属性
            cat.removeAttribute("data-active");
          }
        });

        // 检查当前点击的元素是否已经是激活状态
        if (this.getAttribute("data-active")) {
          // 如果是，恢复到原始状态
          this.style.color = originalColor;
          this.style.backgroundColor = "";
          this.removeAttribute("data-active");
        } else {
          // 设置当前类别的样式为“激活”状态
          this.setAttribute("data-original-color", originalColor); // 保存原始颜色
          this.style.color = "white"; // 设置文本颜色为白色
          this.style.backgroundColor = originalColor; // 设置背景颜色为原始文本颜色
          this.setAttribute("data-active", "true"); // 标记为激活状态
        }
      });
    });

    // 获取所有的.weather元素
    const weatherIcons = document.querySelectorAll(".weather img");

    // 为每个.weather元素内的图片添加点击事件监听器
    weatherIcons.forEach(function (icon) {
      icon.addEventListener("click", function () {
        // 首先，将所有按钮恢复到未激活状态
        weatherIcons.forEach(function (otherIcon) {
          let otherSrc = otherIcon.getAttribute("src");
          // 如果其他图片路径包含'_active'，则移除'_active'
          if (otherSrc.includes("_active")) {
            otherSrc = otherSrc.replace("_active", "");
            otherIcon.setAttribute("src", otherSrc);
          }
        });

        // 然后，激活被点击的按钮
        // 获取当前图片的src属性
        let src = this.getAttribute("src");
        // 仅当当前图片路径不包含'_active'时，添加'_active'
        if (!src.includes("_active")) {
          src = src.replace(".svg", "_active.svg");
          this.setAttribute("src", src);
        }
      });
    });
    // 遍历diary中的background和weather，设置对应的背景图和天气图标
    // 获取diary中的background和weather
    let bg = "{{diary.background}}";
    let weather = "{{diary.weather}}";
    console.log(bg, weather);
    // 设置背景图，触发click事件
    document.querySelector(`[background=${bg}]`).click();
    // 设置天气图标，触发click事件
    document.querySelector(`[alt=${weather}]`).click();
  </script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</body>

</html>